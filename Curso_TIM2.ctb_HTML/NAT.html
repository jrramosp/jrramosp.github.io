<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>NAT</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="styles.css" type="text/css">
</head>
<body>
  <h2><strong>Traducción de direcciones de red</strong></h2><br>
  <h3><strong>Conceptos básicos de NAT</strong></h3><br>
  A diferencia de los protocolos como DNS y DHCP, la traducción de direcciones de red, o <strong>NAT</strong>
  (<strong>network address translation</strong>), es más una técnica que un estándar definido. La traducción de
  direcciones de red hace más o menos lo que parece. Toma una dirección IP y la traduce en otra. Hay muchas
  razones por las que querríamos hacer esto. Van desde salvaguardas de seguridad a preservar las cantidades
  limitadas de espacio disponible de IPV4.<br>
  En su nivel más básico, NAT es una tecnología que permite que una puerta de enlace, por lo general un router o
  un firewall, reescriban la IP de origen de un datagrama IP saliente al tiempo que mantienen la IP original para
  reescribirla en la respuesta. Normalmente, un router inspeccionará el contenido de un datagrama IP, disminuirá
  el TTL en 1, recalculará la suma de verificación y reenviará el resto de los datos en la capa de red sin
  tocarlos. Pero con NAT, el router también reescribirá la dirección IP de origen. Lo que hace NAT en este ejemplo
  es ocultarle a la computadora 2 la IP de la computadora 1. Esto se conoce como <strong>enmascaramiento de
  IP</strong>. El enmascaramiento de IP es un importante concepto de seguridad. Para el mundo exterior, todo el
  espacio de direcciones de la red A está protegido y es invisible. Esto se conoce como "<em>NAT uno a
  muchos</em>".<br>
  <br>
  <h3><strong>NAT y la capa de transporte</strong></h3><br>
  NAT en la capa de red es bastante fácil de entender. Un dispositivo, generalmente un router, traduce una
  dirección IP en otra. Pero en la capa de transporte, las cosas se complican un poco más y varias técnicas
  adicionales entran en juego para asegurarse de que todo funcione correctamente. En NAT uno a muchos hablamos de
  cómo cientos, incluso miles de computadoras pueden tener su tráfico saliente traducido mediante NAT a una sola
  IP. Esto es bastante fácil de entender cuando el tráfico es saliente, pero un poco <em>más complicado cuando
  involucra al tráfico de retorno</em>. Ahora tenemos, potencialmente, cientos de respuestas dirigidas a la misma
  IP, y <em>el router en esta IP necesita determinar qué respuestas van a qué computadora.</em> La forma más
  sencilla de hacer esto es a través de la conservación de puertos.<br>
  La <strong>conservación de puertos</strong> es una técnica en la que <em>el puerto de origen elegido por un
  cliente es el mismo puerto que usa el router</em>. Recuerda que las conexiones salientes eligen un puerto de
  origen al azar de entre los puertos efímeros o los puertos en el rango de 49,152 a 65,535. En la configuración
  más sencilla, una configuración de router para tráfico saliente NAT, solo controlaremos qué puerto de origen es
  este y lo usaremos para dirigir el tráfico de regreso a la computadora correcta. Una vez que esta conexión
  saliente llega al router, realiza la traducción de direcciones de red y coloca su propia IP en el campo de
  dirección de origen del datagrama IP, pero <em>no cambia el puerto de origen</em> en el datagrama TCP y almacena
  estos datos internamente en una tabla. A pesar del tamaño del conjunto de puertos efímeros, todavía es posible
  que dos computadoras diferentes en una red elijan el mismo puerto de origen al mismo tiempo. Cuando esto sucede,
  por lo general el router selecciona un puerto no utilizado al azar para usar en su lugar.<br>
  La <strong>redirección de puertos</strong> es una técnica en la que <em>puertos específicos de destino se pueden
  configurar para que siempre se entreguen a nodos específicos</em>. Esta técnica permite un enmascaramiento
  completo de IP sin dejar de tener servicios que puedan responder al tráfico entrante. Usemos nuestra red
  10.1.1.0/24 nuevamente para demostrar esto. Supongamos que hay un servidor web configurado con una IP de
  10.1.1.5. Con la redirección de puertos, nadie tendría que conocerla. Los posibles clientes web solo tendrían
  que conocer la IP externa del enrutador. Supongamos que es 192.168.1.1. Cualquier tráfico dirigido al puerto 80
  en 192.168.1.1 se reenviaría automáticamente a 10.1.1.5. El tráfico de respuesta tendría la IP de origen
  reescrita para que se parezca a la IP externa del router.<br>
  Esta técnica no solo permite el enmascaramiento IP, sino también simplifica la interacción de los usuarios
  externos con una gran cantidad de servicios ejecutados por la misma organización.<br>
  <br>
  <h3><strong>NAT, espacio de direcciones no enrutable y los límites de IPv4</strong></h3><br>
  La IANA ha estado a cargo de distribuir direcciones IP desde 1988. Desde entonces, Internet se ha expandido a un
  ritmo increíble. Se predijo que los 4,200 millones de direcciones IPv4 posibles se agotarán en el largo plazo y
  ya casi están agotadas.<br>
  Desde hace algún tiempo, la IANA ha sido la principal responsable de asignar bloques de direcciones a <em>cinco
  registros regionales de Internet</em>, o <strong>RIR</strong>. Los cinco RIR son:<br>
  • AFRINIC, que sirve al continente africano<br>
  • ARIN que sirve a los Estados Unidos, Canadá y partes del Caribe<br>
  • APNIC, que es responsable de la mayor parte de Asia, Australia, Nueva Zelanda y las naciones isleñas del
  Pacífico<br>
  • LACNIC que abarca América Central y del Sur y las partes del Caribe fuera de la cobertura de ARIN<br>
  • RIPE, que sirve a Europa, Rusia, Oriente Medio y porciones de Asia Central<br>
  Recuerda que el espacio de direcciones no enrutables se definió en RFC 1918 y consta de varios rangos IP
  diferentes que cualquiera puede usar. Y un número ilimitado de redes puede usar el espacio de <a href=
  "La_capa_de_red.html#direc_no_enrut">direcciones no enrutables</a> internamente porque los routers de Internet
  no le reenviarán tráfico. Esto significa que <em>nunca hay colisión global de direcciones IP cuando la gente usa
  espacio de direcciones no enrutables</em>. Hoy esos espacios de direcciones es utilizable en gran medida gracias
  a tecnologías como NAT.<br>
  Con NAT, puedes tener cientos, incluso miles de máquinas que utilicen el espacio de direcciones no enrutables.
  Sin embargo, con una sola IP pública, todas esas computadoras pueden seguir enviando y recibiendo tráfico de
  Internet. Todo lo que necesitas es <em>una sola dirección IPv4 y, mediante NAT, un router con esa IP puede
  representar muchísimas computadoras</em> detrás de sí. No es una solución perfecta, pero hasta que IPv6 se
  vuelva más disponible a nivel global, nos alcanzará con el espacio de direcciones no enrutables y NAT.<br>
  <a href=
  "https://es.wikipedia.org/wiki/Agotamiento_de_las_direcciones_IPv4">https://es.wikipedia.org/wiki/Agotamiento_de_las_direcciones_IPv4</a>
  <p align="center"><img src="images/home.png" height="22" width="22"> <a href="index.html">Índice</a></p>
</body>
</html>
